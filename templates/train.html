<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Train</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <h1>Voter Training with Face Recognition Technology</h1>
    </header>
    <main>
        <div class="container">
            {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                    <div class="flash-messages">
                        {% for category, message in messages %}
                            <div class="{{ category }}">{{ message }}</div>
                        {% endfor %}
                    </div>
                {% endif %}
            {% endwith %}
            <form class="train-container" method="post">
                <div class="form-group">
                    <label for="voter_id">Voter Id:<span>*</span></label>
                    <input type="text" id="voter_id" name="voter_id" required>
                </div>
                <div class="form-group">
                    <label for="voter_name">Voter Name:<span>*</span></label>
                    <input type="text" id="voter_name" name="voter_name" required>
                </div>
                <div class="form-group">
                    <label for="voter_phone_number">Voter Phone Number:<span>*</span></label>
                    <input type="text" id="voter_phone_number" name="voter_phone_number" value="+91" required>
                </div>
                <div class="form-group">
                    <label for="voter_father_name">Voter Father Name:<span>*</span></label>
                    <input type="text" id="voter_father_name" name="voter_father_name" required>
                </div>
                <div class="form-group">
                    <label for="voter_gender">Voter Gender:<span>*</span></label>
                    <select id="voter_gender" name="voter_gender" required>
                        <option value="">Select Gender</option>
                        <option value="male">Male</option>
                        <option value="female">Female</option>
                        <option value="other">Other</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="voter_dob">Voter DOB:<span>*</span></label>
                    <input type="date" id="voter_dob" name="voter_dob" required>
                </div>
                <div class="form-group">
                    <label for="face_image">Face Image:<span>*</span></label>
                    <div id="cameraContainer">
                        <video id="video" width="640" height="480" autoplay></video>
                        <canvas id="canvas" width="640" height="480" style="display: none;"></canvas>
                    </div>
                    <button type="button" id="capture">Capture Face Image</button>
                    <button type="button" id="retake" style="display: none;">Retake</button>
                    <input type="hidden" id="face_image" name="face_image">
                </div>
                <div class="form-group">
                    <label>Captured Image:</label>
                    <img id="capturedImage" src="" alt="Captured Face Image" style="display: none; width: 640px; height: 480px; border: 1px solid #ddd; margin-top: 10px;">
                </div>
                <button type="submit">Train</button>
            </form>
            <a href="{{ url_for('index') }}" class="back-link">Back to Home</a>
        </div>
    </main>
    <script src="{{ url_for('static', filename='js/capture.js') }}"></script>
</body>
</html>
